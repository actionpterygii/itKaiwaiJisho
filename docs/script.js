"use strict";var jisho,all_area=document.getElementById("wrap"),input_area=document.getElementById("input_area"),result_area=document.getElementById("result_area"),darkMode_btn=document.getElementById("darkMode_btn"),quickSearch_btns=document.getElementsByClassName("quickSearch_btn"),qrcode_btn=document.getElementById("qrcode_btn"),nyuryoku_btn=document.getElementById("nyuryoku_btn"),random_btn=document.getElementById("random_btn"),guguru_btn=document.getElementById("guguru_btn"),style_sheet=document.documentElement.style,jisho_path="jisho.json",my_xhr_1=new XMLHttpRequest;my_xhr_1.overrideMimeType("application/json"),my_xhr_1.open("GET",jisho_path,!0),my_xhr_1.onreadystatechange=function(){my_xhr_1.readyState==XMLHttpRequest.DONE&&200==my_xhr_1.status&&(jisho=JSON.parse(my_xhr_1.responseText||"null"))},my_xhr_1.send();var word_items=["kotb","eigo","kwsk","btmi","mnim"],guguru_url="https://www.google.com/search?q=",input_text="",selected_text=null,darkMode_flg=!1;function hiraToKata(e){return e.replace(/[\u3041-\u3096]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+96)})}function zenToHan(e){return e.replace(/[Ａ-Ｚａ-ｚ０-９]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)})}function containing(e,t,n){return e=(e=e.replace(/\s+/g,"")).toLowerCase(),t=t.toLowerCase(),n?e===t:!!e.match(t)||(!!e.match(hiraToKata(t))||!!e.match(zenToHan(t)))}function search(e,t,n){if("--all"===t)return e;if(!n){var r={},a=0;for(var o in e)for(var u in word_items){i=word_items[u];if(containing(e[o][i],t,n)){r[a]=e[o],a++;break}}return r}var i=word_items[0];for(var o in e)if(containing(e[o][i],t,n))return[e[o]];return[{"":""}]}function createHtml(e){var t='<div class="tango">';for(var n in e)if(""!==e[n])switch(n){case"kotb":t+='<div class="tango_head"><h2 class="'+n+'">'+e[n]+"</h2>";break;case"kwsk":t+='</div><p class="'+n+'">'+e[n]+"</p>";break;case"eigo":case"btmi":case"mnim":case"tigg":t+='<p class="'+n+'">'+e[n]+"</p>";break;case"krng":var r="random_"+Math.random().toString(32).substring(2);t+='<div class="'+n+'"><label class="krng_facade" for="'+r+'" value="'+e[n]+'" onClick="createKanrengo(this)"></label><input id="'+r+'" class="krng_checkbox" type="checkbox"><div class="krng_contents"></div></div>'}return t+="</div>"}function createResult(e,t){var n="",r=search(e,t,!1);if(Object.keys(r).length)for(var a in r)n+=createHtml(r[a]);else n+='<h2 class="nothing">nothing</h2>';return n}function createExactResult(e,t){return createHtml(search(e,t,!0)[0])}function createKanrengo(e){var n=e.nextElementSibling.nextElementSibling,r=e.getAttribute("value").split(",");n.innerHTML=function(){var e="";if(!n.innerHTML)for(var t in r)e+=createExactResult(jisho,r[t]);return e}()}function changeDarkMode(e){e?(style_sheet.setProperty("--text","#555"),style_sheet.setProperty("--background","#FFF"),darkMode_flg=!1,localStorage.removeItem("darkMode")):(style_sheet.setProperty("--text","#FFF"),style_sheet.setProperty("--background","#555"),darkMode_flg=!0,localStorage.setItem("darkMode","true"))}input_area.addEventListener("keyup",function(){input_text=input_area.value.replace(/\s+/g,""),result_area.innerHTML=""!==input_text?createResult(jisho,input_text):""}),all_area.addEventListener("touchend",function(){(selected_text=window.getSelection().toString())?guguru_btn.classList.add("guguru_btn__sentaku"):guguru_btn.classList.remove("guguru_btn__sentaku")}),darkMode_btn.addEventListener("change",function(){changeDarkMode(darkMode_flg)}),document.addEventListener("DOMContentLoaded",function(){"true"===localStorage.getItem("darkMode")&&(changeDarkMode(!1),darkMode_btn.checked=!0);for(var e=function(e){quickSearch_btns[e].addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"}),input_text=quickSearch_btns[e].getAttribute("value"),input_area.value=input_text,result_area.innerHTML=0===input_text.indexOf("--")?createResult(jisho,input_text):createExactResult(jisho,input_text)})},t=0;t<quickSearch_btns.length;t++)e(t)}),qrcode_btn.addEventListener("click",function(){qrcode_btn.nextElementSibling.classList.toggle("qrcode__open")}),nyuryoku_btn.addEventListener("click",function(){input_area.focus()}),random_btn.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"});var e=Object.keys(jisho).length,t=Math.floor(Math.random()*e),n=jisho[t];result_area.innerHTML=createHtml(n),input_text=n.kotb,input_area.value=input_text}),guguru_btn.addEventListener("click",function(){selected_text?(window.open(guguru_url+selected_text),selected_text=null,guguru_btn.classList.remove("guguru_btn__sentaku")):window.open(guguru_url+input_text)});