"use strict";var jisho,input=document.getElementById("input"),result=document.getElementById("result"),nyuryokuBtn=document.getElementById("nyuryokuBtn"),guguruBtn=document.getElementById("guguruBtn"),inputValue="",jishoPath="jisho.json",xhr=new XMLHttpRequest;xhr.overrideMimeType("application/json"),xhr.open("GET",jishoPath,!0),xhr.onreadystatechange=function(){xhr.readyState==XMLHttpRequest.DONE&&200==xhr.status&&(jisho=JSON.parse(xhr.responseText||"null"))},xhr.send();var wordItems=["kotb","eigo","kwsk","mnim"];function hiraToKata(e){return e.replace(/[\u3041-\u3096]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+96)})}function zenToHan(e){return e.replace(/[Ａ-Ｚａ-ｚ０-９]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)})}function containing(e,n){return e=e.toLowerCase().replace(/\s+/g,""),n=n.toLowerCase(),!!e.match(n)||(!!e.match(hiraToKata(n))||!!e.match(zenToHan(n)))}function serch(e,n,o){if("--all"===n)return e;if(""!==n){var t={},r=0;for(var a in e)if(o){var s=wordItems[0];if(e[a][s]===n)return e[a]}else for(var c in wordItems){s=wordItems[c];if(containing(e[a][s],n)){t[r]=e[a],r++;break}}return t}}function createHtml(r,a){var e='<div class="tango">',n=function(t){if(""!==r[t])switch(t){case"kotb":e+="<h2>"+r[t]+"</h2>";break;case"eigo":e+='<p class="eigo">'+r[t]+"</p>";break;case"kwsk":e+='<p class="kwsk">'+r[t]+"</p>";break;case"mnim":e+='<dl class="mnim"><dt>もとのいみ：</dt><dd>'+r[t]+"</dd></dl>";break;case"tigg":e+='<dl class="tigg"><dt>対義語：</dt><dd>'+r[t]+"</dd></dl>";break;case"krng":e+='<div class="krng"><div class="krng_facade"><span class="krng_facade_title">関連語</span><span class="krng_facade_mark"></span></div><div class="krng_contents">'+function(){if(a){console.log("はいった"),console.log(r[t]),console.log("ｈ"),console.log(r[t].split(","));var e="",n=r[t].split(",");for(var o in console.log("tangos"),console.log(n),n)console.log("tango"),console.log(o),console.log("element[key]"),console.log(r[t]),console.log("element[tango]"),console.log(r[o]),console.log("element[key][tango]"),console.log(r[t][o]),e+=createHtml(serch(jisho,o,!0),!1),console.log(e);return e}}()+"</div></div>"}};for(var o in r)n(o);return e+="</div>"}function createResult(e,n){var o="",t=serch(e,n,!1);for(var r in t)o+=createHtml(t[r],!0);return o.replace("undefined","")}input.onkeyup=function(){inputValue=input.value,result.innerHTML=createResult(jisho,inputValue)},nyuryokuBtn.onclick=function(){input.focus()},guguruBtn.onclick=function(){window.open("https://www.google.com/search?q="+inputValue)};