"use strict";var jisho,input=document.getElementById("input"),result=document.getElementById("result"),nyuryokuBtn=document.getElementById("nyuryokuBtn"),guguruBtn=document.getElementById("guguruBtn"),inputValue="",jishoPath="jisho.json",xhr=new XMLHttpRequest;xhr.overrideMimeType("application/json"),xhr.open("GET",jishoPath,!0),xhr.onreadystatechange=function(){xhr.readyState==XMLHttpRequest.DONE&&200==xhr.status&&(jisho=JSON.parse(xhr.responseText||"null"))},xhr.send();var wordItems=["kotb","eigo","kwsk","mnim"];function hiraToKata(e){return e.replace(/[\u3041-\u3096]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+96)})}function zenToHan(e){return e.replace(/[Ａ-Ｚａ-ｚ０-９]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)})}function containing(e,n){return e=e.toLowerCase().replace(/\s+/g,""),n=n.toLowerCase(),!!e.match(n)||(!!e.match(hiraToKata(n))||!!e.match(zenToHan(n)))}function serch(e,n,t){if("--all"===n)return e;if(""!==n){var r={},a=0;for(var o in e)if(t){var i=wordItems[0];if(e[o][i]===n)return e[o]}else for(var s in wordItems){i=wordItems[s];if(containing(e[o][i],n)){r[a]=e[o],a++;break}}return r}}function createHtml(e,n){var t='<div class="tango">';for(var r in e)if(""!==e[r])switch(r){case"kotb":t+="<h2>"+e[r]+"</h2>";break;case"eigo":t+='<p class="eigo">'+e[r]+"</p>";break;case"kwsk":t+='<p class="kwsk">'+e[r]+"</p>";break;case"mnim":t+='<dl class="mnim"><dt>もとのいみ：</dt><dd>'+e[r]+"</dd></dl>";break;case"tigg":t+='<dl class="tigg"><dt>対義語：</dt><dd>'+e[r]+"</dd></dl>";break;case"krng":var a=e.kotb+new Date;t+='<div class="krng"><label class="krng_facade" for="'+a+'" value="'+e[r]+'" onclick="createKanrengo(this)"><span class="krng_facade_title">関連語</span><span class="krng_facade_mark"></span></label><input id="'+a+'" class="krng_checkbox" type="checkbox"><div class="krng_contents"></div></div>'}return t+="</div>"}function createKanrengo(){var e=this.nextElementSibling.nextElementSibling;console.log("aaa"),console.log(this),console.log("aaa"),console.log(this.nextElementSibling),console.log("aaa"),console.log(e);var t=e.getAttribute("value").split(",");e.innerHTML=function(){var e="";for(var n in t)e+=createHtml(serch(jisho,t[n],!0),!1);return e}()}function createResult(e,n){var t="",r=serch(e,n,!1);for(var a in r)t+=createHtml(r[a],!0);return t.replace("undefined","")}input.onkeyup=function(){inputValue=input.value,result.innerHTML=createResult(jisho,inputValue)},nyuryokuBtn.onclick=function(){input.focus()},guguruBtn.onclick=function(){window.open("https://www.google.com/search?q="+inputValue)};