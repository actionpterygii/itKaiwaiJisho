"use strict";!function(){function e(){var e=document.head.querySelector('link[rel="manifest"]'),t=e?e.href:"";if(!t)throw'can\'t find <link rel="manifest" href=".." />\'';var n=function(e){for(var t={},n=0;n<e.length;t={c:t.c},++n){t.c=e[n];try{return new URL("",t.c),function(t){return function(e){return new URL(e||"",t.c).toString()}}(t)}catch(e){}}return function(e){return e||""}}([t,window.location]),r=new XMLHttpRequest;r.open("GET",t),r.withCredentials="use-credentials"===e.getAttribute("crossorigin"),r.onload=function(){try{!function(l,n){function r(e,t,n){var r=e.width,a=e.height;e=window.devicePixelRatio;var o=v({width:r*e,height:a*e});if(o.scale(e,e),o.fillStyle=l.background_color||"#f8f9fa",o.fillRect(0,0,r,a),o.translate(r/2,(a-32)/2),n&&(a=n.width/e,128<(e=n.height/e)&&(a/=e/128,e=128),48<=a&&48<=e&&(o.drawImage(n,a/-2,e/-2,a,e),o.translate(0,e/2+32))),o.fillStyle=s?"white":"black",o.font="24px HelveticaNeue-CondensedBold",n=l.name||l.short_name||document.title,(e=o.measureText(n).width)<.8*r)o.fillText(n,e/-2,0);else for(n=n.split(/\s+/g),e=1;e<=n.length;++e){a=n.slice(0,e).join(" ");var i=o.measureText(a).width;(e===n.length||.6*r<i)&&(o.fillText(a,i/-2,0),o.translate(0,24*1.2),n.splice(0,e),e=0)}return function(){var e=document.createElement("link");return e.setAttribute("rel","apple-touch-startup-image"),e.setAttribute("media","(orientation: "+t+")"),e.setAttribute("href",o.canvas.toDataURL()),e}}function t(e){var t=r(window.screen,"portrait",e),n=r({width:window.screen.height,height:window.screen.width},"landscape",e);window.setTimeout(function(){document.head.appendChild(t()),window.setTimeout(function(){document.head.appendChild(n())},10)},10)}var e=l.icons||[];e.sort(function(e,t){return parseInt(t.sizes,10)-parseInt(e.sizes,10)});var a=e.map(function(e){var t={rel:"icon",href:n(e.src),sizes:e.sizes};if(f("link",t),y&&!(parseInt(e.sizes,10)<120))return t.rel="apple-touch-icon",f("link",t)}).filter(Boolean);a.length&&a[a.length-1].removeAttribute("sizes");var o=document.head.querySelector('meta[name="viewport"]'),i=!!(o&&o.content||"").match(/\bviewport-fit\s*=\s*cover\b/),c=l.display;if(h("mobile-web-app-capable",o=-1!==b.indexOf(c)),function(e,t){if(y||x){var n=w(e);if(y)h("apple-mobile-web-app-status-bar-style",t?"black-translucent":n?"black":"default");else{e:{try{var r=Windows.UI.ViewManagement.ApplicationView.getForCurrentView().titleBar;break e}catch(e){}r=void 0}(t=r)&&(t.foregroundColor=m(n?"black":"white"),t.backgroundColor=m(e))}}}(l.theme_color||"black",i),k&&(h("application-name",l.short_name),h("msapplication-tooltip",l.description),h("msapplication-starturl",n(l.start_url||".")),h("msapplication-navbutton-color",l.theme_color),(e=e[0])&&h("msapplication-TileImage",n(e.src)),h("msapplication-TileColor",l.background_color)),document.head.querySelector('[name="theme-color"]')||h("theme-color",l.theme_color),y){var s=w(l.background_color||"#f8f9fa");(l.related_applications||[]).filter(function(e){return"itunes"===e.platform}).forEach(function(e){e.id?p=e.id:(e=e.url.match(/id(\d+)/))&&(p=e[1])}),(c=p)&&h("apple-itunes-app","app-id="+c),h("apple-mobile-web-app-capable",o),h("apple-mobile-web-app-title",l.short_name||l.name);var u=a[0],d=new Image;d.crossOrigin="anonymous",d.onerror=function(){t()},a.length?(d.onload=function(){if(t(d),l.background_color){var e=g(d,l.background_color);e&&(u.href=e,a.slice(1).forEach(function(t){var n=new Image;n.crossOrigin="anonymous",n.onload=function(){var e=g(n,l.background_color,!0);t.href=e},n.src=t.href}))}},d.src=u.href):d.onerror()}else h("x5-orientation",e={por:"portrait",lan:"landscape"}[String(l.orientation||"").substr(0,3)]||""),h("screen-orientation",e),"fullscreen"===c?(h("x5-fullscreen","true"),h("full-screen","yes")):o&&(h("x5-page-mode","app"),h("browsermode","application"));var p}(JSON.parse(r.responseText),n)}catch(e){console.warn("pwacompat.js error",e)}},r.send(null)}function f(e,t){for(var n in e=document.createElement(e),t)e.setAttribute(n,t[n]);return document.head.appendChild(e),e}function h(e,t){t&&(!0===t&&(t="yes"),f("meta",{name:e,content:t}))}function m(e){return{r:(e=t(e))[0],g:e[1],b:e[2],a:e[3]}}function t(e){var t=v();return t.fillStyle=e,t.fillRect(0,0,1,1),t.getImageData(0,0,1,1).data}function w(e){return e=t(e).map(function(e){return(e/=255)<.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}),3<Math.abs(1.05/(.2126*e[0]+.7152*e[1]+.0722*e[2]+.05))}function g(e,t,n){n=void 0!==n&&n;var r=v(e);if(r.drawImage(e,0,0),n||255!=r.getImageData(0,0,1,1).data[3])return r.globalCompositeOperation="destination-over",r.fillStyle=t,r.fillRect(0,0,e.width,e.height),r.canvas.toDataURL()}function v(e){var t=(e=void 0===e?{width:1,height:1}:e).height,n=document.createElement("canvas");return n.width=e.width,n.height=t,n.getContext("2d")}if("onload"in XMLHttpRequest.prototype&&!navigator.f){var b=["standalone","fullscreen","minimal-ui"],n=navigator.userAgent||"",y=navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")&&-1!==n.indexOf("Mobile/"),k=!!n.match(/(MSIE |Edge\/|Trident\/)/),x="undefined"!=typeof Windows;"complete"===document.readyState?e():window.addEventListener("load",e)}}();